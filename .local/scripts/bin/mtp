#!/bin/bash

# mtp: easily mount mtp devices.
# requires go-mtpfs package.
# last modified: 2014/04/27
# commands: '-m', '-u', or '--help'.

# device mount point.
mountpoint=$HOME/Documents/MTP

if [[ $1 = -[m,u] ]]; then
    if [[ $1 = -m ]]; then
        if [ -d "$mountpoint" ]; then
            go-mtpfs "$mountpoint" &> /dev/null &
        else
            mkdir -p "$mountpoint"
            go-mtpfs "$mountpoint" &> /dev/null &
        fi
    elif [[ $1 = -u ]]; then
        if [ $(pidof go-mtpfs) ]; then
            fusermount -u "$mountpoint"
            echo "Device unmounted."
        else
            echo "There is no MTP device currently mounted."
        fi
    fi
elif [[ $1 = "--help" ]]; then
    echo "Commands:"
    echo "  -m: mount mtp device."
    echo "  -u: unmount mtp device."
    echo "  --help: show this help dialogue."
    echo "Example usage:"
    echo "  mtp -m"
    echo "  mtp -u"
else
    echo "That is not a valid command, see --help."
fi
